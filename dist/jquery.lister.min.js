/*
 *  Lister.js - v0.0.1
 *  A jQuery plugin to make lists from selects.
 *  http://jsumnersmith.github.io/lister
 *
 *  Made by Joel Smith
 *  Under MIT License
 */
!function(a){function b(b,d){var e=this;e.element=b,e.$element=a(e.element),e.settings=a.extend({},defaults,d),e._defaults=defaults,e._name=c,e.init()}var c="lister";defaults={listClass:"lister",openListClass:"lister-open",selectedClass:"lister-selected",selectedTop:!0,selectedTopText:!0,selectedTopWrapperClass:"lister-selected-top"},b.prototype={init:function(){var a=this;a.cloneSelect(),a.bindClicks()},cloneSelect:function(){var b=this;this.$element.each(function(){var c=a(this),d=c.clone().wrap("<div></div>").parent().html().replace(/select/g,"ul").replace(/option/g,"li"),e=a(d);if(e.addClass(b.settings.listClass),c.after(e),b.settings.selectedTop){b.$element.before("<div class='"+b.settings.selectedTopWrapperClass+"'></div>");{a(c.prev("."+b.settings.selectedTopWrapperClass))}}})},bindClicks:function(){var b=this,c=a("ul."+b.settings.listClass);if(b.settings.selectedTop){var d=a(b.$element.prev("."+b.settings.selectedTopWrapperClass)),e=d.next("select"),f=e.next("ul"),g=e.children("option").first();console.log(g),d.text(g.val()),d.click(function(){console.log(f),f.toggleClass(b.settings.openListClass)})}var h=c.find("li");h.click(function(){var c=a(this),d=c.parent().prev(b.$element);if(h.removeClass(b.settings.selectedClass),c.addClass(b.settings.selectedClass),b.settings.selectedTop){var e=a(d.prev("."+b.settings.selectedTopWrapperClass)),f=d.find("option").eq(c.index());f.prop("selected",!0),e.text(f.val())}else{var f=d.find("option").eq(c.index());f.prop("selected",!0)}})}},a.fn.lister=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);